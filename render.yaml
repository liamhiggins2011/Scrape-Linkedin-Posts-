services:
  - type: web
    name: linkedin-intel
    runtime: python
    plan: free
    buildCommand: pip install -r backend/requirements.txt && cd frontend && npm install && npm run build
    startCommand: cd backend && gunicorn -w 2 -k uvicorn.workers.UvicornWorker -b 0.0.0.0:$PORT main:app
    envVars:
      - key: DATA_DIR
        value: /var/data
      - key: UPLOAD_DIR
        value: /var/data/uploads
      - key: PYTHONUNBUFFERED
        value: "1"
    disk:
      name: sqlite-data
      mountPath: /var/data
      sizeGB: 1
